SLOT="0"
require github [ user=kupferlauncher tag=v${PV} ] autotools [ supported_autoconf=[ 2.5 ] supported_automake=[ 1.15 1.13 ] ]

SUMMARY="Library for registering global keyboard shortcuts"
DESCRIPTION="Keybinder works with GTK-based applications using the X Window System"

LICENCES="GPL-2"
PLATFORMS="~amd64"
MYOPTIONS="gtk-doc gobject-introspection python"

DEPENDENCIES="
    build:
        dev-util/intltool
        virtual/pkg-config
        sys-devel/gettext
    build+run:
        dev-libs/glib:2[>=2.30]
        x11-libs/gtk+:2[gobject-introspection?]
        gtk-doc? ( dev-doc/gtk-doc[>=0.14] )
        gobject-introspection? ( gnome-desktop/gobject-introspection[>=1.31.1] )
    run:
        python? ( gnome-bindings/pygobject:2 )
"

DEFAULT_SRC_CONFIGURE_OPTION_ENABLES=(
    'gobject-introspection introspection'
    'gtk-doc'
    'python'
)

src_prepare() {
    edo sed -e "s:AC_CHECK_PROG(HAVE_PKGCONFIG:AC_CHECK_TOOL(HAVE_PKGCONFIG:" \
        -i configure.ac
    edo gtkdocize
    autotools_src_prepare
}

